---
layout: post
title: Validating function arguments in R
categories: [R, Programming]
---

I was programming a Gibbs sampler the other day and, as usual, all hell broke loose: small errors were hard to trace back to the source of the problem and debugging was a pain. Most (if not all) of the bugs could have caught much more early or avoided if I had properly validated the input arguments of my various helper functions. So I decided it was time for me to learn how to do this properly.

## Validating function input arguments in R

The easiest way to do so is manually incorporate checks:

```R
mySum <- function(a, b) {
  if (!is.numeric(a) | !is.numeric(b)) {
    stop("Arguments should be numeric.")
  }
  if (length(a) != length(b)) {
    stop("Arguments should be of the same length.")
  } 
  
  return(a+b)
}
```

This works well enough, but it takes up a lot of space and you have to manually write the description of the errors.

### First alternative

Let's try the `assertthat` package. 

```R
mySum <- function(a, b) {
  assert_that(is.numeric(a), is.numeric(b))
	assert_that(length(a) == length(b))
  
  return(a+b)
}
```

This is neater, but the error messages are not very descriptive.

```R
> mySum(1, "1")
		Error: b is not a numeric or integer vector 
```

What is `b` here? What arguments in the function call caused the error?  It's a bit hard to tell, especially if the call to this function is hidden in some large Gibbs sampler.

### The `assert` function

Let's load the script "assert.R" which you can find on my Github Gist and which I also included below.

```R
source("assert.R")
```

Usage is similar to what we did above:

```R
mySum <- function(a, b) {
  assert(is.numeric(a), is.numeric(b))
	assert(length(a) == length(b))
  
  return(a+b)
}
```

But now we have much more descriptive error messages.

```R
> mySum(1, "1")
		Error: in mySum(a = 1, b = "1")
		Failed checks: 
			is.numeric(b) 
```

---

**Source:**

<script src="https://gist.github.com/OlivierBinette/a048d7c1f470740b64e95c74828c8516.js"></script>

